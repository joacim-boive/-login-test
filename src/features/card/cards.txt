Användningsfall
----
01. Inget kort
    account.noOfCards: 0
    cards: []

    Visa:
        ansök om kort


02. Kort beställt
    account.noOfCards: 1
    cards: []

    Visa:
        ditt kort är på väg


03. Inaktivt kort
    account.noOfCards: 1
    cards: [ {extra: false, active: false} ]

    Visa:
        aktivera kort

    Efter aktivering:
        ditt kort har aktiverats, tillbaka till kortöversikt (ritar om sig enligt 4.)


04. Aktivt kort
    account.noOfCards: 1
    cards: [ {extra: false, active: true} ]

    Visa:
        kortinfo
        beställ extrakort
        spärra kort


05. Kort beställt, extrakort beställt   (kan uppstå efter spärra kort?)
    account.noOfCards: 2
    cards: []

    Visa:
        dina kort är på väg (2 st)


06. Inaktivt kort, extrakort beställt
    account.noOfCards: 2
    cards: [ {extraCard: false] ]

    Visa:
        aktivera kort
        ditt extrakort är på väg

    Efter aktivering:
        ditt kort har aktiverats, tillbaka till kortöversikt (ritar om sig enligt 7.)


07. Aktivt kort, extrakort beställt
    account.noOfCards: 2
    cards: [ {extraCard: false, active: true] ]

    Visa:
        kortinfo
        ditt kort är på väg (1 st)
        beställ extrakort
        spärra kort


08. Levererat kort, 2 x extrakort beställt
    account.noOfCards: 3
    cards: [ {extraCard: false, active: false] ]

    Visa:
        aktivera kort
        dina kort är på väg (2 st)

    Efter aktivering:
        ditt kort har aktiverats, tillbaka till kortöversikt


09. Inget kort, 2 x extrakort beställda  (kan uppstå efter spärra kort?)
    account.noOfCards: 2   <== samma som 5.
    cards: []              <== samma som 5.

    Visa:
        dina kort är på väg (2 st)


10. Inget kort, extrakort levererat, extrakort beställt
    account.noOfCards: 2
    cards: [ {extraCard: true, active: false} ]

    Visa:
        ditt kort är på väg    (går ej avgöra om det är huvudkort eller extrakort som beställts)
        dina extrakort
            kortinfo med aktivera

    Efter aktivering:
        ditt kort har aktiverats, tillbaka till kortöversikt

11. Inget kort, 2 x extrakort levererade
    account.noOfCards: 2
    cards: [ {extraCard: true}, {extraCard: true} ]

    Visa:
        ansök om kort
        dina extrakort
            kortinfo med aktivera
            kortinfo med aktivera

12. Tre huvudkort, inga extrakort (obs: felaktigt data)
    account.noOfCards: 3
    cards: [ {extraCard: false}, {extraCard: false}, {extraCard: false} ]

    Visa:
        kortinfo
        hur visa resterande?
           visas som "dina kort är på väg" med korrekt impl av fallen 1-11
           visa som "2 x extrakort"?



Pages
----

Manage card page
/card/:accountRef

Components
----

KORT
--
x Ansök om kort (panel)
x   Tack för din beställning (panel)
x   Beställning kunde inte genomföras (panel)
x Visa befintligt kort (panel)
x Aktivera kort (panel)

EXTRAKORT
--
x Skaffa extrakort (panel)
x   Tack för din beställning (samma som kort)
x   Beställning kunde inte genomföras (samma som kort)
x Visa extrakort (panel)
x   Visa/aktivera befintligt extrakort (subpanel)

OTHER
--
x Spärra kort


TEST DATA
----
GET ACCOUNT with no card
---
{
  "responseTime" : 17,
  "status" : 200,
  "response" : {
    "accountNumber" : "9752238000003902",
    "reference" : "CHMNc3UHD1FUCXQCQHJlQQRWNzdGVyLVNIQgxxxxx",
    "product" : {
      "id" : "MCARD111",
      "name" : "Inlåning mastercard 111",
      "cardName" : "MULTICARD MASTERCARD            "
    },
    "limit" : 4000000,
    "used" : -486197,
    "maxLimit" : 20000000,
    "overDrawn" : false,
    "allowIncreaseLimit" : true,
    "status" : "ACTIVE",
    "cardProfile" : "other",
    "brickId" : "130",
    "reserved" : false,
    "numberOfCards" : 0
  }
}

APPLY FOR CARD
---
POST
/rest/customers/v1/:customerId/accounts/cards/:accountRef

response
{
  "responseTime" : 435,
  "status" : 204
}

GET ACCOUNT after card application
---
{
  "responseTime" : 22,
  "status" : 200,
  "response" : {
    "accountNumber" : "9752206000201859",
    "reference" : "CHMNc3UEAVFUCXYCQnNgSgRWNzdGVyLVNIQgxxxxx",
    "product" : {
      "id" : "MCARD002",
      "name" : "HX KONTO",
      "cardName" : "MASTERCCARD ICKE CHIP           "
    },
    "limit" : 1500000,
    "used" : 0,
    "maxLimit" : 15000000,
    "overDrawn" : false,
    "allowIncreaseLimit" : true,
    "status" : "ACTIVE",
    "cardProfile" : "ecster",
    "brickId" : "112",
    "reserved" : false,
    "numberOfCards" : 1    <== no of cards is 1
  }
}

Get cards
---
GET
/rest/customers/v1/:customerRef/accounts/:accountRef/cards

response
{
  "responseTime" : 21,
  "status" : 200,
  "response" : {
    "cards" : [ ]   <== no of elements is 0
   }
}


REKIT
----

rekit add component card/ManageCardPage -c -u /card/:accountRef

rekit add component card/ApplyForCardPanel
rekit add component card/ApplyForCardSuccessPanel
rekit add component card/ApplyForCardFailurePanel
rekit add component card/ActivateCardPanel
rekit add component card/ShowCardPanel

rekit add component card/ApplyForExtraCardPanel
rekit add component card/ShowExtraCardsPanel
rekit add component card/ShowExtraCardSubpanel

rekit add component card/BlockCardPanel
